<div class="halign-wrapper">
  <div class="row">
    <div class="col s8 offset-s2">
      <div>
        <label for="fileId"
          ><span>File ID</span>
          <input type="text" id="fileId" [(ngModel)]="fileId"
        /></label>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s8 offset-s2">
      <div>
        <label for="encKey"
          ><span>Decryption Key</span>
          <input
            id="encKey"
            type="text"
            [class.valid]="keyIsValid"
            [class.invalid]="!keyIsValid"
            [(ngModel)]="encryptionKey"
            (ngModelChange)="validate($event)"
          />
        </label>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col s8 offset-s2">
      <button class="btn" (click)="getFile()" [disabled]="!keyIsValid">
        Fetch and decrypt
      </button>
      <a class="right" *ngIf="url" [href]="url" [download]="fileName"
        ><div class="btn">Download File</div></a
      >
    </div>
  </div>
  <div class="row" *ngIf="message">
    <div class="col s4 offset-s4">
      <div class="card">
        <div class="card-content">
          <p class="center">
            {{ message }}
          </p>
        </div>
      </div>
    </div>
    <div class="row" *ngIf="image">
      <div *ngIf="!viewImage" class="col s8 offset-s2">
        <div class="card">
          <div class="card-content">
            <p>File appears to be an image. View it in the browser?</p>
          </div>
          <div class="card-action">
            <button class="btn-flat" (click)="viewImageToggle()">View</button>
          </div>
        </div>
      </div>
      <div *ngIf="viewImage" class="col s12">
        <img [src]="image" />
      </div>
    </div>
    <div class="row" *ngIf="text">
      <div class="col s8 offset-s2">
        <div>
          <label for="file-name">File name</label>
          <input id="file-name" type="text" [(ngModel)]="fileName" disabled />
        </div>
        <div>
          <label for="editor">File Content</label>
          <textarea
            id="editor"
            [ngModel]="text"
            class="materialize-textarea"
            disabled
          ></textarea>
        </div>
      </div>
    </div>
  </div>
</div>
